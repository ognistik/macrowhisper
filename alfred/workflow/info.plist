<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>com.aft.macrowhisper</string>
	<key>connections</key>
	<dict>
		<key>37E6EFA2-0D9A-4A5A-A833-F81F6CA7FC8B</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>E8933CF2-E1D7-4ABB-A976-C45670B96A10</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>7705963D-C476-424D-B528-23708223F608</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>37E6EFA2-0D9A-4A5A-A833-F81F6CA7FC8B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>ECB51972-0915-4166-8C5F-0D790D0CD47C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>37E6EFA2-0D9A-4A5A-A833-F81F6CA7FC8B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Robert J. P. Oberg</string>
	<key>description</key>
	<string>Automation Helper for Superwhisper</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>Macrowhisper</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>availableviaurlhandler</key>
				<false/>
				<key>triggerid</key>
				<string>mw</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>7705963D-C476-424D-B528-23708223F608</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./Macrowhisper\ Alfred "$1"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>11</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>E8933CF2-E1D7-4ABB-A976-C45670B96A10</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>{var:theKw}||Macrowhisper</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Please Wait</string>
				<key>script</key>
				<string>./macrowhisper\ alfred "$1"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>skipuniversalaction</key>
				<true/>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>Macrowhisper</string>
				<key>type</key>
				<integer>11</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>37E6EFA2-0D9A-4A5A-A833-F81F6CA7FC8B</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>action</key>
				<integer>0</integer>
				<key>argument</key>
				<integer>0</integer>
				<key>focusedappvariable</key>
				<false/>
				<key>focusedappvariablename</key>
				<string></string>
				<key>hotkey</key>
				<integer>0</integer>
				<key>hotmod</key>
				<integer>0</integer>
				<key>hotstring</key>
				<string></string>
				<key>leftcursor</key>
				<false/>
				<key>modsmode</key>
				<integer>0</integer>
				<key>relatedAppsMode</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.hotkey</string>
			<key>uid</key>
			<string>ECB51972-0915-4166-8C5F-0D790D0CD47C</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>## Macrowhisper Alfred – User Guide

This Alfred workflow lets you run your Macrowhisper actions directly, using your voice input from Superwhisper. It’s built to complement the Macrowhisper's CLI and Superwhisper, so you can schedule actions, execute with the last result, or set an action as active so that future dictations continue to run through it.

### What you can do
- **Schedule &amp; Dictate**: Schedule an action in Macrowhisper and immediately start dictation with Superwhisper, sending the new transcription to that action.
- **Schedule Only**: Schedule an action now; start dictation yourself when you’re ready (scheduled actions have a default timeout setting of 5 seconds in Macrowhisper). This and the above may be the most useful.
- **Set as Active**: Make an action the current active action. Keep dictating over time and each new transcription will be sent to that action. You don’t have to start dictation immediately (but you can).
- **Set as Active &amp; Dictate**: Make an action active and kick off dictation right away. An active action will not deactivate itself until you do it through the CLI, this workflow, or directly in Macrowhisper's configuration file.
- **Execute Action**: Run the selected action using the last valid transcription result.

You can also trigger an optional update to the Keyboard Maestro macro that shows your current active action and Superwhisper’s mode in your menu bar.

### Requirements
- **Macrowhisper CLI**: Installed and available on your PATH (or at a known absolute path). See the [Macrowhisper docs](https://by.afadingthought.com/macrowhisper) for installation.
- **Superwhisper**: This workflow uses Superwhisper’s URL scheme to (optionally) start recording and set change mode.
- **Config file**: Macrowhisper's configuration JSON file defining your actions.

### Alfred variables to set
Set these in the workflow’s configuration:

- **Configuration Path**: Absolute path to your Macrowhisper configuration JSON.
- **Macrowhisper's Actions**: Pick your own actions in the dropdowns. You choose what each item does when you trigger it, with or without modifier keys.
- **Dictation Mode** (optional): Superwhisper's “mode key” to use when starting or preparing to dictate. If you leave this blank, the workflow will NOT change Superwhisper’s mode.
  - To get the mode key: [open your Superwhisper’s mode JSON](https://superwhisper.com/docs/modes/switching-modes#deep-links) and copy the `key` for the mode you want. 
- **KM Macro** (optional): Toggle this to trigger the "MW Mbar" Keyboard Maestro macro after setting an action active. This macro shows the active action and Superwhisper mode in your menu bar. You can download it from the [Macrowhisper's documentation](https://by.afadingthought.com/macrowhisper). It’s optional and not required for the workflow to function.

### Using the list and search
- Type `@` to browse by category (URL, Shortcut, Insert, AppleScript, Shell). Keep typing to fuzzy-match category names and press Tab/Return to autocomplete (e.g., `@URL `).
- After selecting a category (or if you don’t use `@`), type to fuzzy-search action names.
- Each item’s subtitle shows the available actions for different keys:

### Superwhisper modes and dictation
- When you choose an option that starts or prepares dictation, the workflow can set Superwhisper’s mode using the mode key.
- If `dictateMode` is set, the workflow will call Superwhisper to switch modes before you dictate (when choosing that option). Be aware it will not auto switch back to your previous Superwhisper mode after the action runs. A voice-only mode is suggested for more versatility.
- If `dictateMode` is left blank, the workflow will NOT change Superwhisper’s mode. This is useful if you prefer to keep your current mode or handle mode switching yourself.

### Troubleshooting
- “macrowhisper not found”: Make sure the Macrowhisper CLI is installed and on your PATH. The workflow will also try to resolve it with `which macrowhisper`.
- Superwhisper doesn’t start or change mode: Confirm Superwhisper is installed and that your `dictateMode` key is correct. Leaving `dictateMode` blank will intentionally skip changing modes.
- No actions listed: Check that `configPath` points to a valid configuration JSON and that the file is readable.</string>
	<key>uidata</key>
	<dict>
		<key>37E6EFA2-0D9A-4A5A-A833-F81F6CA7FC8B</key>
		<dict>
			<key>xpos</key>
			<real>535</real>
			<key>ypos</key>
			<real>225</real>
		</dict>
		<key>7705963D-C476-424D-B528-23708223F608</key>
		<dict>
			<key>xpos</key>
			<real>340</real>
			<key>ypos</key>
			<real>145</real>
		</dict>
		<key>E8933CF2-E1D7-4ABB-A976-C45670B96A10</key>
		<dict>
			<key>xpos</key>
			<real>705</real>
			<key>ypos</key>
			<real>225</real>
		</dict>
		<key>ECB51972-0915-4166-8C5F-0D790D0CD47C</key>
		<dict>
			<key>xpos</key>
			<real>340</real>
			<key>ypos</key>
			<real>365</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>~/.config/macrowhisper/macrowhisper.json</string>
				<key>filtermode</key>
				<integer>0</integer>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Configuration</string>
			<key>type</key>
			<string>filepicker</string>
			<key>variable</key>
			<string>configPath</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>Schedule &amp; Dictate</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Schedule &amp; Dictate</string>
						<string>Schedule &amp; Dictate</string>
					</array>
					<array>
						<string>Schedule Only</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Set as Active</string>
						<string>Set as Active</string>
					</array>
					<array>
						<string>Set as Active &amp; Dictate</string>
						<string>Set as Active &amp; Dictate</string>
					</array>
					<array>
						<string>Execute Action</string>
						<string>Execute Action</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>⏎</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>pressReturn</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>Schedule Only</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Schedule &amp; Dictate</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Schedule Only</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Set as Active</string>
						<string>Set as Active</string>
					</array>
					<array>
						<string>Set as Active &amp; Dictate</string>
						<string>Set as Active &amp; Dictate</string>
					</array>
					<array>
						<string>Execute Action</string>
						<string>Execute Action</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>⌘</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>pressCmd</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>Set as Active</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Schedule &amp; Dictate</string>
						<string>Schedule &amp; Dictate</string>
					</array>
					<array>
						<string>Schedule Only</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Set as Active</string>
						<string>Set as Active</string>
					</array>
					<array>
						<string>Set as Active &amp; Dictate</string>
						<string>Set as Active &amp; Dictate</string>
					</array>
					<array>
						<string>Execute Action</string>
						<string>Execute Action</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>⌥</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>pressOpt</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>Set as Active &amp; Dictate</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Schedule &amp; Dictate</string>
						<string>Schedule &amp; Dictate</string>
					</array>
					<array>
						<string>Schedule Only</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Set as Active</string>
						<string>Set as Active</string>
					</array>
					<array>
						<string>Set as Active &amp; Dictate</string>
						<string>Set as Active &amp; Dictate</string>
					</array>
					<array>
						<string>Execute Action</string>
						<string>Execute Action</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>⌘⌥</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>pressCmdOpt</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>Execute Action</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Schedule &amp; Dictate</string>
						<string>Schedule &amp; Dictate</string>
					</array>
					<array>
						<string>Schedule Only</string>
						<string>Schedule Only</string>
					</array>
					<array>
						<string>Set as Active</string>
						<string>Set as Active</string>
					</array>
					<array>
						<string>Set as Active &amp; Dictate</string>
						<string>Set as Active &amp; Dictate</string>
					</array>
					<array>
						<string>Execute Action</string>
						<string>Execute Action</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>⌃</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>pressCtrl</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<false/>
				<key>required</key>
				<false/>
				<key>text</key>
				<string></string>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Km MBar Macro?</string>
			<key>type</key>
			<string>checkbox</string>
			<key>variable</key>
			<string>kmMacro</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string></string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>If left empty, dictation actions will use the currently active Superwhisper mode.</string>
			<key>label</key>
			<string>Dictation Mode?</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>dictateMode</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>mw</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Workflow Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>theKw</string>
		</dict>
	</array>
	<key>version</key>
	<string>1.0.0</string>
	<key>webaddress</key>
	<string></string>
</dict>
</plist>
